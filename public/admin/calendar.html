<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brooklyn Barbearia - Calend치rio</title>
    <link rel="stylesheet" href="/css/admin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="admin-dashboard">
    <div id="headerContainer"></div>
    <div class="dashboard-container">
        <main class="dashboard-content">
            <section id="calendarView" class="view-section active">
                <div class="view-header" style="margin-bottom: 30px;">
                    <div>
                        <h1 style="font-size: 2rem; margin-bottom: 8px; color: var(--primary-green);">Calend치rio</h1>
                        <p class="subtitle" style="color: #888; font-size: 0.95rem;">Visualize as reservas e disponibilidade</p>
                    </div>
                </div>

                <div class="calendar-controls">
                    <div class="view-type-selector">
                        <button class="view-type-btn active" data-view="general" id="viewGeneralBtn">
                            <i class="fas fa-th"></i> Vista Geral
                        </button>
                        <button class="view-type-btn" data-view="individual" id="viewIndividualBtn">
                            <i class="fas fa-calendar"></i> Vista Individual
                        </button>
                    </div>

                    <div class="barber-selector-wrapper" id="barberSelectorWrapper" style="display: none;">
                        <label for="barberSelect">Barbeiro:</label>
                        <select id="barberSelect" class="form-control form-control-sm">
                            <option value="">Selecione um barbeiro</option>
                        </select>
                    </div>

                    <div class="week-navigation" id="weekNavigation" style="display: none;">
                        <button class="week-nav-btn" id="prevWeekBtn">
                            <i class="fas fa-chevron-left"></i> Semana Anterior
                        </button>
                        <div class="week-display">
                            <div class="week-range" id="weekRangeDisplay">-</div>
                            <div class="week-year" id="weekYearDisplay" style="font-size: 0.85rem; color: #888;">-</div>
                        </div>
                        <button class="week-nav-btn" id="nextWeekBtn">
                            Pr칩xima Semana <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>

                <!-- Vista Geral -->
                <div id="generalViewContainer" class="calendar-view-container" style="margin-top: 30px;">
                    <div class="calendar-general-view" id="calendarGridGeneral">
                        <div style="text-align: center; padding: 40px; color: #999;">
                            <i class="fas fa-spinner fa-spin" style="font-size: 2rem; margin-bottom: 10px;"></i>
                            <p>A carregar calend치rio...</p>
                        </div>
                    </div>
                </div>

                <!-- Vista Individual -->
                <div id="individualViewContainer" class="calendar-view-container" style="display: none; margin-top: 30px;">
                    <div class="calendar-individual-view" id="calendarGridIndividual">
                        <div style="text-align: center; padding: 40px; color: #999;">
                            <p>Selecione um barbeiro</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Scripts -->
    <script src="/js/admin/api.js"></script>
    <script>
        // Load header
        fetch('/admin/header.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('headerContainer').innerHTML = html;
                
                // Marcar nav item ativo
                const navItems = document.querySelectorAll('.nav-item');
                navItems.forEach(item => {
                    item.classList.remove('active');
                    if (item.getAttribute('data-view') === 'calendar') {
                        item.classList.add('active');
                    }
                });
            })
            .catch(error => console.error('Error loading header:', error));
    </script>
    <script src="/js/admin/calendar-modern.js"></script>
</body>
</html>